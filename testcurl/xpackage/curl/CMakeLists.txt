cmake_minimum_required(VERSION 3.10)

include(${CMAKE_CURRENT_LIST_DIR}/../xpackage.cmake)

set(XPACKAGE_NAME curl)
set(XPACKAGE_VERSION 7.65.1)
set(XPACKAGE_URL https://www.openssl.org/source/openssl-1.1.1c.tar.gz)
set(XPACKAGE_HASH SHA256=821AEB78421375F70E55381C9AD2474BF279FC454B791B7E95FC83562951C690)

set(XPACKAGE_SOURCE_BASE curl-${XPACKAGE_VERSION})
set(XPACKAGE_SOURCE_DIR ${XPACKAGE_SOURCE_BASE}/lib)

set(XPACKAGE_SOURCE_GLOB *.c)
set(XPACKAGE_SOURCE_EXCLUDES ${EXLUDES})
set(XPACKAGE_INCLUDES ${XPACKAGE_SOURCE_DIR} ${XPACKAGE_SOURCE_BASE}/include )

set(DEFAULT_FLAGS -DCURL_STATICLIB -DBUILDING_LIBCURL -DENABLE_IPV6 -DCURL_DISABLE_LDAP -DHAVE_GETADDRINFO)
if(DEFINED USE_OPENSSL)
set(XPACKAGE_FLAGS ${DEFAULT_FLAGS} -DUSE_OPENSSL)
set(XPACKAGE_DEPENDS openssl)
else()
set(XPACKAGE_FLAGS ${DEFAULT_FLAGS})
set(XPACKAGE_DEPENDS )
endif()

set(XPACKAGE_EXPORT_INCLUDES ${XPACKAGE_SOURCE_BASE}/include)
set(XPACKAGE_EXPORT_FLAGS -DCURL_STATICLIB)
if(${WIN32})
	set(XPACKAGE_EXPORT_LIBS ws2_32)
else()
	set(XPACKAGE_EXPORT_LIBS pthread)
endif()


xpackage_init()

